
let countryCode;
let countryName;
let flags = document.getElementById("flags");
let numberCode = document.getElementById("numberCode");

$.ajax({
    url: "https://get.geojs.io/v1/ip/geo.js",
    dataType: "jsonp",
    jsonpCallback:"geoip",
    success: function(data) {
      console.log("Country Code: "+data.country_code);
    //   console.log("Country: "+data.country);
      countryName = data.country;
      countryCode = data.country_code;
      countryFlag(countryCode, countryName);
    }
});

let country = {
    "AU": ["+61","-286px 0"],
    "AT": ["+43","-264px 0"],
    "AZ": ["+994","-352px 0"],
    "AL": ["+355","-132px 0"],
    "DZ": ["+213","-1401px 0"],
    "AO": ["+244","-176px 0"],
    "AD": ["+376","-22px 0"],
    "AG": ["+1268","-88px 0"],
    "AR": ["+54","-220px 0"],
    "AM": ["+374","-154px 0"],
    "AF": ["+93","-66px 0"],
    "BS": ["+1242","-702px 0"],
    "BD": ["+880","-418px 0"],
    "BB": ["+1246","-396px 0"],
    "BH": ["+973","-504px 0"],
    "BZ": ["+501","-812px 0"],
    "BY": ["+375","-790px 0"],
    "BE": ["+32","-440px 0"],
    "BJ": ["+229","-548px 0"],
    "BG": ["+359","-482px 0"],
    "BO": ["+591","-636px 0"],
    "BA": ["+387","-374px 0"],
    "BW": ["+267","-768px 0"],
    "BR": ["+55","-680px 0"],
    "BN": ["+673","-614px 0"],
    "BF": ["+226","-460px 0"],
    "BI": ["+257","-526px 0"],
    "BT": ["+975","-724px 0"],
    "VU": ["+678",""],
    "VA": ["+379",""],
    "GB": ["+44","-1775px 0"],
    "HU": ["+36",""],
    "VE": ["+58",""],
    "TL": ["+670",""],
    "VN": ["+84",""],
    "GA": ["+241",""],
    "HT": ["+509",""],
    "GY": ["+592",""],
    "GM": ["+220",""],
    "GH": ["+233",""],
    "GT": ["+502",""],
    "GN": ["+224",""],
    "GW": ["+245",""],
    "DE": ["+49",""],
    "HN": ["+504",""],
    "PS": ["+970",""],
    "GD": ["+1473",""],
    "GR": ["+30",""],
    "GE": ["+995",""],
    "DK": ["+45",""],
    "DJ": ["+253",""],
    "DM": ["+1767",""],
    "DO": ["+1809",""],
    "CD": ["+243","-878px 0"],
    "EG": ["+20",""],
    "ZM": ["+260",""],
    "ZW": ["+263",""],
    "IL": ["+972",""],
    "IN": ["+91",""],
    "ID": ["+62",""],
    "JO": ["+962",""],
    "IQ": ["+964",""],
    "IR": ["+98",""],
    "IE": ["+353",""],
    "IS": ["+354",""],
    "ES": ["+34",""],
    "IT": ["+39",""],
    "YE": ["+967",""],
    "CV": ["+238","-1159px 0"],
    "KZ": ["+7",""],
    "KH": ["+855","-2677px 0"],
    "CM": ["+237","-1027px 0"],
    "CA": ["+1","-834px 0"],
    "QA": ["+974",""],
    "KE": ["+254",""],
    "CY": ["+357",""],
    "KG": ["+996",""],
    "KI": ["+686",""],
    "CN": ["+86","-1049px 0"],
    "KP": ["+850",""],
    "CO": ["+57","-1071px 0"],
    "KM": ["+269","-2721px 0"],
    "CR": ["+506",""],
    "CI": ["+225",""],
    "CU": ["+53",""],
    "KW": ["+965",""],
    "LA": ["+856",""],
    "LV": ["+371",""],
    "LS": ["+266",""],
    "LR": ["+231",""],
    "LB": ["+961",""],
    "LY": ["+218",""],
    "LT": ["+370",""],
    "LI": ["+423",""],
    "LU": ["+352",""],
    "MU": ["+230",""],
    "MR": ["+222",""],
    "MG": ["+261",""],
    "MW": ["+265",""],
    "MY": ["+60",""],
    "ML": ["+223",""],
    "MV": ["+960",""],
    "MT": ["+356",""],
    "MA": ["+212",""],
    "MH": ["+692",""],
    "MX": ["+52",""],
    "MZ": ["+258",""],
    "MD": ["+373",""],
    "MC": ["+377",""],
    "MN": ["+976",""],
    "MM": ["+95",""],
    "NA": ["+264",""],
    "NR": ["+674",""],
    "NP": ["+977",""],
    "NE": ["+227",""],
    "NG": ["+234",""],
    "NL": ["+31",""],
    "NI": ["+505",""],
    "NZ": ["+64",""],
    "NO": ["+47",""],
    "AE": ["+971",""],
    "OM": ["+968",""],
    "PK": ["+92",""],
    "PW": ["+680",""],
    "PA": ["+507",""],
    "PG": ["+675",""],
    "PY": ["+595",""],
    "PE": ["+51",""],
    "PL": ["+48",""],
    "PT": ["+351",""],
    "CG": ["+242",""],
    "KR": ["+82",""],
    "RU": ["+7",""],
    "RW": ["+250",""],
    "RO": ["+40",""],
    "SV": ["+503",""],
    "WS": ["+685",""],
    "SM": ["+378",""],
    "ST": ["+239",""],
    "SA": ["+966",""],
    "MK": ["+389",""],
    "SC": ["+248",""],
    "SN": ["+221",""],
    "VC": ["+1784",""],
    "KN": ["+1869",""],
    "LC": ["+1758",""],
    "RS": ["+381",""],
    "SG": ["+65",""],
    "SY": ["+963",""],
    "SK": ["+421",""],
    "SI": ["+386",""],
    "SB": ["+677",""],
    "SO": ["+252",""],
    "SD": ["+249",""],
    "SR": ["+597",""],
    "US": ["+1","-5241px 0"],
    "SL": ["+232",""],
    "TJ": ["+992",""],
    "TH": ["+66",""],
    "TZ": ["+255",""],
    "TG": ["+228",""],
    "TO": ["+676",""],
    "TT": ["+1868",""],
    "TV": ["+688",""],
    "TN": ["+216",""],
    "TM": ["+993",""],
    "TR": ["+90",""],
    "UG": ["+256",""],
    "UZ": ["+998",""],
    "UA": ["+380",""],
    "UY": ["+598",""],
    "FM": ["+691",""],
    "FJ": ["+679",""],
    "PH": ["+63",""],
    "FI": ["+358",""],
    "FR": ["+33",""],
    "HR": ["+385",""],
    "CF": ["+236","-900px 0"],
    "TD": ["+235","-4845px 0"],
    "ME": ["+382",""],
    "CZ": ["+420",""],
    "CL": ["+56","-1005px 0"],
    "CH": ["+41",""],
    "SE": ["+46",""],
    "LK": ["+94",""],
    "EC": ["+593",""],
    "GQ": ["+240",""],
    "ER": ["+291",""],
    "SZ": ["+268",""],
    "EE": ["+372",""],
    "ET": ["+251",""],
    "ZA": ["+27",""],
    "SS": ["+211",""],
    "JM": ["+1876",""],
    "JP": ["+81",""]
}


function countryFlag(countryCode, countryName) {
    // let code = countryCode;
    countryName = countryName.replace(/[_ \t]+/g, '_');
    let countryNameNew = countryName.toLowerCase();
    flags.src = `https://images.apple.com/support/assets/images/layout/icons/flags/country/${countryNameNew}.png`;

    numberCode.value = country[countryCode][0].substring(1); // с удалением "+"
    console.log(numberCode.value);
}